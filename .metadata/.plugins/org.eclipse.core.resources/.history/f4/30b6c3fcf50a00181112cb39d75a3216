package com.gqw.controller.myorder;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

import com.gqw.bean.Order;
import com.gqw.service.order.MyOrderServiceImpl;
@Controller
public class MyOrderController {
	@Autowired
	private MyOrderServiceImpl myOrderServiceImpl;
	@RequestMapping("insertOrder")
	public String insertOrder(String ps1,String nickName,String address,String tels,String about,String commodityName,float commodityPrice){
		Order order=new Order();
		Date day=new Date();    
		SimpleDateFormat df = new SimpleDateFormat("yyyyMMddHHmmss");
		String a=df.format(day);
		SimpleDateFormat df1 = new SimpleDateFormat("yyyy-MM-dd");
		String today=df1.format(day);
		int five=(int) (Math.random()*90000+10000);
		String b=String.valueOf(five);
		StringBuffer sb=new StringBuffer();
		sb.append(a).append(b);
		String ordernumber=sb.toString();
		order.setOrdernumber(ordernumber);
		order.setName(commodityName);
		order.setNumbers(Integer.parseInt(ps1));
		Float money=commodityPrice*Integer.parseInt(ps1);
		order.setMoney(money);
		order.setOrdertime(today);
		order.setShouhuoren(nickName);
		order.setShouhuoaddress(address);
		order.setPhonenumber(tels);
		String status="未发货";
		order.setStatus(status);
		
		Boolean bool=myOrderServiceImpl.insertOrder(order);
		if(bool){
			System.out.println("success");
			return "commodityList";
		}else{
			System.out.println("fail");
			return "commodityList";
		}
	}
	@RequestMapping("conditionOrderPageQuery")
	public String conditionOrderPageQuery(HttpServletRequest request,Map<String,Object> map,int start,int pageSize,String ordernumber,String status,String date1,String date2){
		
		return "myOrder";
	}
}
